<!DOCTYPE html>
<shadow></shadow><style></style>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<title>Generate t-SNE</title>
<!-- <style>
img {
    filter: invert(100%);

}
</style> -->
<!-- Bootstrap -->
<link href="static/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="./static/css/app.css">

<script>
  function generateTSNE() {
        // do ajax request to ask for what the location of the TSNE image is. Then use in in the following line.
        console.log('button pressed')
        httpGetAsync('/test',handleTSNEResponse)
      }i
      function httpGetAsync(theUrl, callback)
      {
        console.log('async 1')
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() { 
          if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
            callback(xmlHttp.responseText);
        }
        xmlHttp.open("GET", theUrl, true); // true for asynchronous 
        xmlHttp.send(null);
        console.log('async 2')
      }
      function handleTSNEResponse(responseText) {
      // body...
      console.log('async callback')
      console.log(responseText)
      document.getElementById("tsne_plot").src = responseText
      console.log('done')
    }
  </script>
  <style>
    .superawesome {background-color: coral;}
    body{
      background-color: #000; 
      color:#fff2f2;}
  </style>




  <body data-gr-c-s-loaded="true">
    <svg class="svg-container">
      <symbol id="ei-spinner-icon" viewBox="0 0 50 50"><path d="M25 18c-.6 0-1-.4-1-1V9c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z"></path><path opacity=".3" d="M25 42c-.6 0-1-.4-1-1v-8c0-.6.4-1 1-1s1 .4 1 1v8c0 .6-.4 1-1 1z"></path><path opacity=".3" d="M29 19c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z"></path><path opacity=".3" d="M17 39.8c-.2 0-.3 0-.5-.1-.4-.3-.6-.8-.3-1.3l4-6.9c.3-.4.8-.6 1.3-.3.4.3.6.8.3 1.3l-4 6.9c-.2.2-.5.4-.8.4z"></path><path opacity=".93" d="M21 19c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.2-.3.2-.5.2z"></path><path opacity=".3" d="M33 39.8c-.3 0-.6-.2-.8-.5l-4-6.9c-.3-.4-.1-1 .3-1.3.4-.3 1-.1 1.3.3l4 6.9c.3.4.1 1-.3 1.3-.2.1-.3.2-.5.2z"></path><path opacity=".65" d="M17 26H9c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z"></path><path opacity=".3" d="M41 26h-8c-.6 0-1-.4-1-1s.4-1 1-1h8c.6 0 1 .4 1 1s-.4 1-1 1z"></path><path opacity=".86" d="M18.1 21.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z"></path><path opacity=".3" d="M38.9 33.9c-.2 0-.3 0-.5-.1l-6.9-4c-.4-.3-.6-.8-.3-1.3.3-.4.8-.6 1.3-.3l6.9 4c.4.3.6.8.3 1.3-.2.3-.5.4-.8.4z"></path><path opacity=".44" d="M11.1 33.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.1.2-.3.2-.5.2z"></path><path opacity=".3" d="M31.9 21.9c-.3 0-.6-.2-.8-.5-.3-.4-.1-1 .3-1.3l6.9-4c.4-.3 1-.1 1.3.3.3.4.1 1-.3 1.3l-6.9 4c-.2.2-.3.2-.5.2z"></path></symbol>
      <symbol id="flower-icon" viewBox="0 0 65 98" fill="none" fill-rule="evenodd" stroke="#fff" stroke-width="2"><path d="M0.0434880207,0.660889225 C0.0434880207,0.660889225 38.4349751,22.2085462 38.4349744,96.8228805" id="Path-142"></path><path d="M62.0915607,5.40798425 C62.0915607,5.40798425 36.9588366,-4.08164371 28.3460397,24.8902199 C57.7428081,31.9172508 62.0915607,5.40798425 62.0915607,5.40798425 Z" id="Imported-Layers"></path></symbol>
    </svg>

    <section id="app-container" class="app">
      <section id="page-loader" class="page-loader stop">
        <div class="page-loader-content">
          <div class="icon-loader">
            <svg class="svg-icon-loader"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ei-spinner-icon"></use></svg>
          </div>
          <div class="icon-flower">
          <svg class="svg-icon-flower"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#flower-icon"></use></svg>
          </div>
        </div>
      </section>

      <div class = "row">
        <div class = "col-md-5">
          <h1>Upload new Images</h1>
          <form method=post enctype=multipart/form-data>
            Select images: 
            <input type=file name=file accept="image/*" multiple>
            <input type="submit" class="btn btn-primary" type=submit value=Upload>

            {% for image in images %}
            <img  src="{{ image }}" style= "object-fit:cover" height="42" width="42" />
            {% endfor %}
          </form>

          <form class="form-horizontal" action = '/tsne'>
            <h3>Resizing Parameters</h3> 
            <span id="helpBlock" class="help-block">Values for the dimension of each image. (enter same value for squares)</span>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">x resolution</label>
              <div class="col-sm-4">
                <input type="number" class="form-control" name = "x_resolution" id="number" value = "200"placeholder="x resolution">
              </div>
            </div>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">y resolution</label>
              <div class="col-sm-4">
                <input type="number" class="form-control"  name = "y_resolution"id="number" value = "200"placeholder="y resolution">
              </div>
            </div>
            <h3>t-SNE Parameters</h3> 
            <span id="helpBlock" class="help-block">Different values result in different result</span>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">perplexity</label>
              <div class="col-sm-4">
                <input type="number" class="form-control"  name = "perplexity" id="number" value = "15" placeholder="perplexity">
              </div>
            </div>
            <h3>Output Plot Parameters</h3> 
            <span id="helpBlock" class="help-block">The resolution of the image</span>
            <div class="form-group">
              <label for="inputEmail3" class="col-sm-3 control-label">Dots Per Inchs</label>
              <div class="col-sm-4">
                <input type="number" class="form-control" name = "DotsPerInchs" id="number" value = "50" placeholder="DotsPerInchs">
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-4 col-sm-3">
                <button type="submit" class="btn btn-success" onclick="generateTSNE()">Generate t-SNE</button>
                <!--  <input type="submit" class="btn btn-success">Generate t-SNE</input> -->

              </div>
            </div>
          </form>
        </div>



<!--         <div class = "col-md-7">
          <h2>image</h2>
          //<div id="playground-canvas">
          //<canvas id="output" width="600" height="600"></canvas>
          <img id="tsne_plot" src="static/output/output.png" style= "object-fit:cover" height="50%" width="50%" >
        </div>
      </div> -->




<!-- 
<p id="tsne_plot" class="superawesome">
  euaeouhtaoeuntheout
</p>
-->

<img id="tsne_plot" src="">



<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="static/js/bootstrap.min.js"></script>


</section>